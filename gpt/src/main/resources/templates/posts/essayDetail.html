<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>에세이 상세보기</title>
    <!-- CSS 파일 불러오기 -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <!-- jQuery 추가 -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<h1 th:text="${post.title}">게시글 제목</h1>
<p th:text="${post.content}">게시글 내용</p>
<span>작성자: <span th:text="${post.author}">작성자</span></span>
<p>조회수: <span th:text="${post.viewCount}">0</span></p>
<p>좋아요: <span th:text="${post.likeCount}">0</span></p>

<form th:action="@{'/essay/' + ${post.id} + '/like'}" method="post">
    <button type="submit" id="likeBtn" th:classappend="${liked ? 'liked' : ''}">좋아요</button>
</form>

<h2>댓글</h2>
<ul>
    <li th:each="comment : ${comments}">
        <p th:text="${comment.content}">댓글 내용</p>
        <span>작성자: <span th:text="${comment.author}">댓글 작성자</span></span>
    </li>
</ul>

<h3>댓글 작성</h3>
<form th:action="@{'/essay/' + ${post.id} + '/comment'}" method="post">
    <textarea name="content" placeholder="댓글 내용을 입력하세요" required></textarea>
    <button type="submit">작성</button>
</form>

<!-- 게시판 목록으로 돌아가는 버튼 -->
<div>
    <a th:href="@{/essay}">
        <button type="button">목록으로 돌아가기</button>
    </a>
</div>

<script>
    $(document).ready(function () {
        if ([[$liked]]) {
            $('#likeBtn').addClass('liked');
        }
    });
</script>
</body>
</html>
